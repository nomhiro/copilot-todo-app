# 機能仕様書 - Copilot TODO App

## 1. 概要

### 1.1 目的
GitHub Copilot認定資格（GH-300）コースのハンズオン演習用TODOアプリケーション

### 1.2 対象ユーザー
- GitHub Copilot認定資格の受験者
- Copilotの機能を学習したい開発者

### 1.3 技術要件
- Node.js 20.x以上
- npm 10.x以上
- モダンブラウザ（Chrome, Firefox, Safari, Edge最新版）

---

## 2. 機能一覧

### 2.1 TODO管理機能

#### 2.1.1 TODO作成
| 項目 | 仕様 |
|------|------|
| 機能ID | TODO-CREATE |
| 概要 | 新しいTODOを作成する |
| URL | `/todos/new` |
| 入力項目 | タイトル（必須）、説明（任意）、優先度（必須）、期限（任意） |

**入力バリデーション**:
- タイトル: 必須、2-100文字
- 説明: 任意、最大500文字
- 優先度: high / medium / low のいずれか
- 期限: 有効な日付形式（YYYY-MM-DD）

**処理フロー**:
1. ユーザーがフォームに入力
2. バリデーション実行
3. API (`POST /api/todos`) を呼び出し
4. 成功時: 一覧ページにリダイレクト
5. 失敗時: エラーメッセージを表示

#### 2.1.2 TODO一覧表示
| 項目 | 仕様 |
|------|------|
| 機能ID | TODO-LIST |
| 概要 | TODOの一覧を表示する |
| URL | `/` |
| 表示項目 | タイトル、優先度バッジ、期限、完了状態 |

**フィルタリング**:
- 優先度: すべて / 高 / 中 / 低
- ステータス: すべて / 未完了 / 完了

**検索**:
- タイトルと説明を対象にキーワード検索
- 部分一致（大文字小文字を区別しない）

#### 2.1.3 TODO詳細表示
| 項目 | 仕様 |
|------|------|
| 機能ID | TODO-DETAIL |
| 概要 | TODOの詳細情報を表示する |
| URL | `/todos/[id]` |
| 表示項目 | タイトル、説明、優先度、期限、作成日時、更新日時、完了状態 |

#### 2.1.4 TODO編集
| 項目 | 仕様 |
|------|------|
| 機能ID | TODO-EDIT |
| 概要 | 既存のTODOを編集する |
| URL | `/todos/[id]/edit` |
| 編集可能項目 | タイトル、説明、優先度、期限 |

#### 2.1.5 TODO削除
| 項目 | 仕様 |
|------|------|
| 機能ID | TODO-DELETE |
| 概要 | TODOを削除する |
| 確認 | 確認ダイアログを表示 |
| 処理 | API (`DELETE /api/todos/[id]`) を呼び出し |

#### 2.1.6 完了状態切り替え
| 項目 | 仕様 |
|------|------|
| 機能ID | TODO-TOGGLE |
| 概要 | TODOの完了/未完了を切り替える |
| 操作 | チェックボックスをクリック |
| 処理 | API (`PUT /api/todos/[id]`) を呼び出し |

---

### 2.2 統計機能

#### 2.2.1 統計ダッシュボード
| 項目 | 仕様 |
|------|------|
| 機能ID | STATS-DASHBOARD |
| 概要 | TODOの統計情報を表示する |
| URL | `/stats` |

**表示項目**:
| 指標 | 説明 | 計算方法 |
|------|------|---------|
| 総タスク数 | 全TODOの数 | `todos.length` |
| 完了数 | 完了済みTODOの数 | `todos.filter(t => t.completed).length` |
| 未完了数 | 未完了TODOの数 | `total - completed` |
| 期限超過数 | 期限切れの未完了TODO数 | 期限 < 今日 かつ 未完了 |
| 完了率 | 完了の割合 | `(completed / total) * 100` |
| 生産性スコア | 総合評価 | 完了率60% + 期限超過率40% |
| 優先度別タスク数 | 高/中/低ごとの数 | 優先度でグループ化 |

---

## 3. データモデル

### 3.1 Todo
```typescript
interface Todo {
  id: string;           // ユニークID（タイムスタンプベース）
  title: string;        // タイトル（2-100文字）
  description?: string; // 説明（最大500文字、任意）
  completed: boolean;   // 完了状態
  priority: Priority;   // 優先度
  dueDate?: string;     // 期限（ISO 8601形式、任意）
  createdAt: string;    // 作成日時（ISO 8601形式）
  updatedAt: string;    // 更新日時（ISO 8601形式）
}

type Priority = 'high' | 'medium' | 'low';
```

### 3.2 TodoStats
```typescript
interface TodoStats {
  total: number;         // 総タスク数
  completed: number;     // 完了数
  pending: number;       // 未完了数
  overdue: number;       // 期限超過数
  completionRate: number; // 完了率（0-100）
}
```

### 3.3 FilterOptions
```typescript
interface FilterOptions {
  priority?: Priority;    // 優先度フィルター
  completed?: boolean;    // 完了状態フィルター
  search?: string;        // 検索キーワード
}
```

---

## 4. 画面仕様

### 4.1 ヘッダー
- ロゴ: 左上に表示、クリックでホームに遷移
- ナビゲーション: TODO一覧 / 新規作成 / 統計

### 4.2 TODO一覧ページ (`/`)
```
+------------------------------------------+
|  TODO一覧                    [+ 新規作成] |
|  タスクを管理しましょう                    |
+------------------------------------------+
|  [検索...]          [優先度▼] [ステータス▼]|
+------------------------------------------+
|  □ タスクタイトル          [高] 明日      |
|    説明文の一部...              [編集][削除]|
+------------------------------------------+
|  ✓ 完了したタスク          [低] 完了      |
|    説明文の一部...              [編集][削除]|
+------------------------------------------+
```

### 4.3 TODO詳細ページ (`/todos/[id]`)
```
+------------------------------------------+
|  ← 一覧に戻る                             |
+------------------------------------------+
|  タスクタイトル        [高] [完了]  [編集] |
+------------------------------------------+
|  説明                                     |
|  詳細な説明文がここに表示されます          |
+------------------------------------------+
|  期限: 2024年12月25日                     |
|  作成日時: 2024年12月20日 10:00           |
|  更新日時: 2024年12月21日 14:30           |
+------------------------------------------+
```

### 4.4 TODO作成/編集ページ (`/todos/new`, `/todos/[id]/edit`)
```
+------------------------------------------+
|  新規TODO作成 / TODO編集                  |
|  新しいタスクを追加します                  |
+------------------------------------------+
|  タイトル *                               |
|  [________________________]               |
|                                           |
|  説明                                     |
|  [________________________]               |
|  [________________________]               |
|                                           |
|  優先度 *         期限                    |
|  [高 ▼]           [____-__-__]            |
|                                           |
|  [作成/更新]  [キャンセル]                |
+------------------------------------------+
```

### 4.5 統計ダッシュボード (`/stats`)
```
+------------------------------------------+
|  統計ダッシュボード                        |
|  タスクの進捗状況を確認                    |
+------------------------------------------+
|  📋 総タスク  ✅ 完了   ⏳ 未完了  ⚠️ 超過  |
|     6           2          4          1    |
+------------------------------------------+
|  完了率              |  生産性スコア       |
|  [===33%===]         |  45 / 100          |
|  2/6 タスク完了      |  もう少し頑張りましょう|
+------------------------------------------+
|  優先度別タスク数                          |
|  高  [======] 2                           |
|  中  [=========] 3                        |
|  低  [===] 1                              |
+------------------------------------------+
```

---

## 5. 優先度の定義

| 優先度 | 表示名 | 色 | 説明 |
|--------|--------|-----|------|
| high | 高 | 赤（red-600） | 緊急・重要なタスク |
| medium | 中 | 黄（yellow-600） | 通常のタスク |
| low | 低 | 緑（green-600） | 後回しにできるタスク |

---

## 6. 期限表示ルール

| 条件 | 表示 | スタイル |
|------|------|---------|
| 期限なし | 「期限なし」 | グレー |
| 今日 | 「今日」 | 通常 |
| 明日 | 「明日」 | 通常 |
| 2-7日後 | 「N日後」 | 通常 |
| 8日以降 | 日付表示 | 通常 |
| 期限超過（未完了） | 「N日超過」 | 赤・太字 |

---

## 7. エラーハンドリング

### 7.1 バリデーションエラー
- フォーム上部に赤色のエラーメッセージを表示
- エラーのある入力フィールドを赤枠でハイライト

### 7.2 APIエラー
- 一覧ページ: 「TODOの取得に失敗しました」+ 再試行ボタン
- 作成/編集: 「保存に失敗しました」
- 削除: 「削除に失敗しました」

### 7.3 404エラー
- 存在しないTODO IDにアクセス: Next.jsのnotFound()を使用

---

## 8. 非機能要件

### 8.1 パフォーマンス
- 初回読み込み: 3秒以内
- API応答: 500ms以内

### 8.2 アクセシビリティ
- キーボードナビゲーション対応
- スクリーンリーダー対応（ARIA属性）
- 色だけに依存しない情報伝達

### 8.3 レスポンシブデザイン
- モバイル: 320px以上
- タブレット: 768px以上
- デスクトップ: 1024px以上

---

## 9. 将来の拡張予定（実装なし）

以下は将来的に追加可能な機能です。現在は実装されていません：

- [ ] タグ機能
- [ ] カテゴリ管理
- [ ] ユーザー認証
- [ ] データベース永続化
- [ ] リマインダー通知
- [ ] ドラッグ&ドロップでの並び替え
- [ ] ダークモード
